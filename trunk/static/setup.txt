plugin.tx_damfrontend_pi1 = USER_INT
plugin.tx_damfrontend_pi1 {
	userFunc = tx_damfrontend_pi1->main
	templateFile = {$plugin.tx_damfrontend_pi1.templateFile}
	singleID = {$plugin.tx_damfrontend_pi1.singleID}
	allowedLanguages = EN,DE
	filter {
		errorWrap = {$plugin.tx_damfrontend_pi1.filter.errorWrap}
	}
	marker {
		# optionSplit is possible: ###FILELIST_RECORD_ODD### |*| ###FILELIST_RECORD_EVEN### || ###FILELIST_RECORD_ODD### |*|
		filelist_record = ###FILELIST_RECORD###
	}

	renderCategoryTree {
		stdWrapPlusIcon.wrap = |
		stdWrapEqualsIcon.wrap = |
		stdWrapMinusIcon.wrap = |
		stdWrap.wrap = <div class="cattree">|</div>
		stdWrapControl.wrap = <div class="control" >|</div>
		# TypoLink
		wrapTitle.ATagParams = class="titlewrap"
	}

	renderFields {
	# set stdWrap config for each field
		file_size {
			setContentToCurrent = 1
			if.isTrue.current = 1
			bytes = 1
			bytes.labels = "Bytes| Kilobyte| Megabyte| Gigabyte"
		}
		# stdWrap : Timestamp of file
		tstamp.strftime =  %Y / %m / %d
		# stdWrap : Creation Timestamp of file
		crdate.strftime =  %Y / %m / %d

		title.typolink.parameter.data = TSFE:id
  		title.typolink.additionalParams = &eID=dam_frontend_push&docID={field:uid}
		title.typolink.additionalParams.insertData = 1

		link_download.typolink.parameter.data = TSFE:id
  		link_download.typolink.additionalParams = &eID=dam_frontend_push&docID={field:uid}
		link_download.typolink.additionalParams.insertData = 1

		link_single.typolink {
			parameter.data = TSFE:id
			additionalParams = &tx_damfrontend_pi1[showUid]={field:uid}&tx_damfrontend_pi1[confirmDeleteUID]=&tx_damfrontend_pi1[editUID]=&tx_damfrontend_pi1[catEditUID]=
			additionalParams.insertData = 1
			addQueryString = 1
			no_cache  = 1
		}
	}
	SingleView < .renderFields
	SingleView {
		file_name {
			typolink.parameter.data = TSFE:id
  			typolink.additionalParams = &eID=dam_frontend_push&docID={field:uid}
			typolink.additionalParams.insertData = 1
			typolink.extTarget = _blank

			prepend = IMAGE
			prepend.file {
				import.dataWrap = {field:file_path}{field:file_name}|
				width = 100m
				height = 100m
			}
			prepend.stdWrap.wrap = |<br />
			# Only if the file could be rendered
			prepend.stdWrap.if.isTrue.data = TSFE:lastImageInfo|0

		}
		category.htmlSpecialChars = 0
		category.cObject = CONTENT
		category.cObject {
			table =  tx_dam_cat
			select {
				pidInList = {$plugin.tx_damfrondend_pi1.mediafolder}
				selectFields = *
				join = tx_dam_mm_cat
				where = tx_dam_cat.uid = tx_dam_mm_cat.uid_foreign
				andWhere (
					 tx_dam_mm_cat.uid_local = {field:uid}
				)
				andWhere.insertData = 1
				languageField = sys_language_uid
			}
			renderObj = TEXT
			renderObj.field = title
			renderObj.wrap = |<br />
			stdWrap.override = Please set constant "plugin.tx_damfrondend_pi1.mediafolder".
			stdWrap.override.if.isFalse = {$plugin.tx_damfrondend_pi1.mediafolder}
		}
	}

	filterView {
		from_day.ifEmpty =
		from_month.ifEmpty =
		from_year.ifEmpty.data = date:U
		from_year.ifEmpty.strftime =  %Y
		to_day.ifEmpty =
		to_month.ifEmpty =
		to_year.ifEmpty.data = date:U
		to_year.ifEmpty.strftime =  %Y
		filetype.ifEmpty =
		searchword.ifEmpty =
		searchword.htmlSpecialChars = 1
		# komma separated list of fields from tx_dam
		searchwordFields = description, title
	}

	# configuration for subpart ###FILELIST###
	filelist {
		# typolink : formurl action
		form_url.parameter.data = TSFE:id
		form_url.addQueryString = 1
		# stdWrap : how many items should be default in the filelist
		defaultLength = 10

		#
		searchwordFields = title, description

		# configuration for an list item
		item {
			# stdWrap : Timestamp of file
			tstamp.strftime =  %Y / %m  /  %d
			# stdWrap : Creation Timestamp of file
			crdate.strftime =  %Y / %m  /  %d
		}

		link_select_download {
			typolink.returnLast = url
			typolink.parameter.data = TSFE:id
  			typolink.additionalParams = &eID=dam_frontend_push
			typolink.additionalParams.insertData = 1
			typolink.extTarget = _blank

			# TEXT Objects, starting with "1"
			1.value = <option value="">nicht gew&auml;hlt</option>

			2.value = <option value="ORIGINAL:ORIGINAL">original</option>

			3.wrap = <option value="width:1024;y:768;resample:72">|</option>
			3.value = optimized for powerpoint
			3.lang.de = F&uuml;r Powerpoint optimiert

			4.wrap = <option value="width:1024;height:768;resample:300">|</option>
			4.value = 1024x768 - 300 DPI {field:uid}
			4.insertData = 1
			4.if.equals.field = media_type
			4.if.value = 2

			5.wrap = <option value="width:100;y:100;resample:20">|</option>
			5.value = thumbnail
			5.lang.de = Thumbnail
		}
		
		security_options {
			showOnlyFilesWithPermission=0
		}
		browselink.wrap= |
		browselinkCurrent.wrap= <span style="border: 1px solid black">|</span>
	}

	# configuration for subpart ###NEWFILTER_LINK###
	newfilter_link {
		# typolink: formurl action
		form_url.parameter.data = TSFE:id
		form_url.addQueryString = 1
	}
	# configuration for subpart ###FILTERVIEW###
	filterview {
		# typolink : formurl action
		form_url.parameter.data = TSFE:id
		form_url.addQueryString = 1
	}
	# configuration for subpart ###NEWFILTER###
	newfilter {
		# stdWrap
		save =
		# stdWrap
		cancel =
		# stdWrap
		filter_title_label =
		# stdWrap
		filter_description_label =
	}

	mediaTypes {
		DEFAULT {
		  DEFAULT = default.png
		}

		text {
		  DEFAULT = text_default.png
		}

		image {
		  DEFAULT = image_default.png
		}

		application {
		  pdf = application_pdf.png
		  msexcel = image_default.png
		  DEFAULT = application_default.png
		}
  	}
  	upload {
  		autoAsignFEGroups = 1
  	}
  	_CSS_DEFAULT_STYLE (
		/*---------------------------------- category tree */

		.cattree td {
			font-size: 80%;
		}
		.cattree img {
			padding: 0px;
			background: none;
			margin: 0px;
			border-width: 0px;
		}

		.cattree td a img {
			border-width: 0px;
			border-color: white;
			padding: 0px;
			margin: 0px;
		}

		a:link,
		a:visited {
			color: #373535;
			text-decoration: none;
		}
		.cattree td a  {
			border-width: 0px;
			border-color: white;
			padding: 0px;
			margin: 0px;
		}
		.cattree div.control{
			width: 100px;
		}
		td.typo3-browsetree-control {
			width:5%;
		}

		table.typo3-browsetree {
			border: 0;
			border-collapse: collapse;
		}


		/*---------------------------------- filelist */
		table.filelist {
			font-size: 90%;
			border-collapse: collapse;
			border: 1px solid #B5B3CB;
			width: 100%;
		}
		table.filelist td img {
			border-width: 0px;
			border-color: white;
			padding: 0px;
			margin: 0px;
		}
		table.filelist td {
			padding: 5px;
		}
		table.filelist th {
			color: white;
			background: #B5B3CB;
			padding-bottom: 9px;
		}
		table.filelist td a img {
			border-width: 0px;
			border-color: white;
			padding: 0px;
			margin: 0px;
		}
		/*------------------------------- single view */
		table.file_singleView {
			width: 100%;
			border-collapse: collapse;
			border: 1px solid #B5B3CB;
			font-size: 90%;
		}
		table.file_singleView th {
			text-align: left;
			padding: 5px;
			color: white;
			background: #B5B3CB;
		}
		table.file_singleView td {
			padding: 3px;
		}
		table.file_singleView td.title {
			font-weight: bold;
			color: #B5B3CB;
			width: 50%;
		}
		.tree_selectedCats {
			background: #B5B3CB;
			font-weight: bold;
		}
		.tree_unselectedCats {

		}
		/*-------------------------------- category list */
		.delete_button a:link,
		.delete_button a:visited{
			border: 1px solid #B5B3CB;
			font-size: 130%;
			font-weight: bold;
			color: #B5B3CB;
			width: 20px;
			height: 20px;
			padding-right: 5px;
			padding-left: 5px;
		}
		.delete_button a:hover {
			background: #B5B3CB;
			color: white;
		}
		/*------------------------------ Menu */
		ul.foldout {
			list-style: none;
			position: absolute;
			top: 1px;
			border: 1px solid #B5B3CB;
			margin: 0px;
			padding: 0px;
			border-bottom-width: 0px;
			border-top-width: 0px;
			background: white;
		}
		ul.foldout li {
			padding: 10px;
			border-bottom: 1px solid #B5B3CB;
			font-size: 90%;
			min-width: 300px;
		}

		/******************************** Resultlist */
		ul#browseresultlist {
			padding: 0px;
			margin: 0px;
			list-style: none;
		}
		ul#browseresultlist li {
			float: left;
			padding-right: 10px;
		}
	)
}

[globalVar = LIT:1 = {$plugin.tx_damfrontend_pi1.doNotUsePushFile}]
# for using advanced download features with resizing we cannot use an direct link
plugin.tx_damfrontend_pi1 {
	renderFields {
		title.typolink.parameter = {field:file_path}{field:file_name}
		title.typolink.parameter.insertData = 1
		link_download.typolink.parameter = {field:file_path}{field:file_name}
		link_download.typolink.parameter.insertData = 1
	}
	singleView {
		file_name {
			typolink.parameter = {field:file_path}{field:file_name}
			typolink.parameter.insertData = 1
		}
	}
}

[end]
